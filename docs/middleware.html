<!DOCTYPE html><html><head><title>Stylus</title><link rel="stylesheet" href="../main.css"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body><div id="container"><h1><a href='http://learnboost.github.com/stylus'>Stylus</a></h1><p class="tagline"><em class="expressive">Expressive, </em><em class="dynamic">dynamic, </em><em class="robust">robust </em><em class="css">CSS</em></p><div id="ribbon"><a href="http://github.com/learnboost/stylus">Fork me on GitHub</a></div><ul id="menu"><li><a href="../docs/selectors.html">Selectors</a></li><li><a href="../docs/variables.html">Variables</a></li><li><a href="../docs/interpolation.html">Interpolation</a></li><li><a href="../docs/operators.html">Operators</a></li><li><a href="../docs/mixins.html">Mixins</a></li><li><a href="../docs/functions.html">Functions</a></li><li><a href="../docs/kwargs.html">Keyword Arguments</a></li><li><a href="../docs/bifs.html">Built-in Functions</a></li><li><a href="../docs/vargs.html">Rest Params</a></li><li><a href="../docs/comments.html">Comments</a></li><li><a href="../docs/conditionals.html">Conditionals</a></li><li><a href="../docs/hashes.html">Hashes</a></li><li><a href="../docs/iteration.html">Iteration</a></li><li><a href="../docs/import.html">@import and @require</a></li><li><a href="../docs/media.html">@media</a></li><li><a href="../docs/font-face.html">@font-face</a></li><li><a href="../docs/keyframes.html">@keyframes</a></li><li><a href="../docs/extend.html">@extend</a></li><li><a href="../docs/block.html">@block</a></li><li><a href="../docs/functions.url.html">url()</a></li><li><a href="../docs/literal.html">CSS Literal</a></li><li><a href="../docs/css-style.html">CSS Style Syntax</a></li><li><a href="../docs/escape.html">Char Escaping</a></li><li><a href="../docs/executable.html">Executable</a></li><li><a href="../docs/error-reporting.html">Error Reporting</a></li><li><a href="../docs/middleware.html">Connect Middleware</a></li><li><a href="../docs/introspection.html">Introspection API</a></li><li><a href="../docs/js.html">JavaScript API</a></li>
  <li><a href="http://github.com/visionmedia/nib">CSS3 Extensions with Nib</a></li>
  <li><a href="../try.html">Try Stylus Online!</a></li>
  </ul><div id="content">

<h2 id="connect-middleware">Connect Middleware</h2>

<p>Stylus ships with <a href="http://www.senchalabs.org/connect/">Connect</a> middleware for auto-compiling Stylus sheets whenever they&#8217;re modified.</p>

<h2 id="stylusmiddlewareoptions">stylus.middleware(options)</h2>

<h4 id="options">Options</h4>

<p>Return Connect middleware with the given <code>options</code>.</p>

<pre><code>  `serve`     Serve the stylus files from `dest` [true]
  `force`     Always re-compile
  `src`       Source directory used to find .styl files
  `dest`      Destination directory used to output .css files
              when undefined defaults to `src`.
  `compile`   Custom compile function, accepting the arguments
              `(str, path)`.
  `compress`  Whether the output .css files should be compressed
  `firebug`   Emits debug infos in the generated css that can
              be used by the FireStylus Firebug plugin
  `linenos`   Emits comments in the generated css indicating 
              the corresponding stylus line
</code></pre>

<h4 id="examples">Examples</h4>

<p>Serve .styl files from ./public:</p>

<pre><code>var app = connect();

app.middleware(__dirname + '/public');
</code></pre>

<p>Change the <code>src</code> and <code>dest</code> options to alter where .styl files
 are loaded and where they&#8217;re saved:</p>

<pre><code> var app = connect();
 
 app.middleware({
   src: __dirname + '/stylesheets',
   dest: __dirname + '/public'
 });
</code></pre>

<p>Here we set up the custom compile function so that we may
 set the <code>compress</code> option, or define additional functions.</p>

<p>By default the compile function simply sets the <code>filename</code>
 and renders the CSS. In the following case we&#8217;re compressing
 the output, using the &#8220;nib&#8221; library plugin, and auto-importing it.</p>

<pre><code> function compile(str, path) {
   return stylus(str)
     .set('filename', path)
     .set('compress', true)
     .use(nib())
     .import('nib');
 }
</code></pre>

<p>Pass it as an option like so:</p>

<pre><code> var app = connect();

 app.middleware({
     src: __dirname
   , dest: __dirname + '/public'
   , compile: compile
 })
</code></pre>
</div></div></body></html>